<!DOCTYPE html>

<head>
  <title>Results</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="/static/main.css">
  <link rel="stylesheet" href="/static/bootstrap.min.css">
  <script src="https://d3js.org/d3.v6.min.js"></script>
</head>

<body>
  <div class="topcorner">
    <a href="account" class="btn btn-warning"  style = 'background-color: #4285F4;
  border: none'>Sign In</a>
  </div>

  <div class="navbar navbar-default navbar-fixed-bottom" role="navigation">
    <nav>
      <ul class="nav navbar-nav">
        <li>
          <a href="/">Search</a>
        </li>
        <li>
          <a href="popular">Popular</a>
        </li>
        <li>
          <a href="videogames">Video Games</a>
        </li>
        <li>
          <a href="mobilegames">Mobile Games</a>
        </li>
        <li>
          <a href="boardgames">Board Games</a>
        </li>
      </ul>
    </nav>
    <div class="container">
      <p class="navbar-text pull-right">Built by: cj369, ec636, lfh32, ll692, mac568</p>
    </div>
  </div>

  <h1 style="font-size: 55px; font-family:Futura; color: #4285F4; text-align:center">
    C
    <span style="color: #EA4335; ">S</span>
    <span style="color: #FBBC05; ">4</span>
    3
    <span style="color: #34A853; ">0</span>
    <span style="color: #EA4335; ">0</span>
  </h1>
  <h2 style="text-align:center">Game Recommendation Engine</h2>

  <br />
  <h3 id='similarto' style="text-align:center"></h3>
  <div id='btns' style = 'display: flex; justify-content: space-evenly;'>
    <button>Filter</button>
    <button>Sort</button>
  </div>

  <div id='results'></div>


  <script>

    let rk = JSON.parse(sessionStorage.getItem('rk'));
    let gn = sessionStorage.getItem('gn');
    let kw = sessionStorage.getItem('kw');
    let gt = sessionStorage.getItem('gt');

    document.getElementById('similarto').innerHTML = 'Results of games similar to {' + gn + ', ' + kw + ', ' + gt + '}' + ':';

    const len = rk.length;
    let simm = len === 0 ? -1 : rk[0][1];
    let res = d3.select('#results');
    let i = 0;
    simm = simm >= 0.6 ? simm : -1;

    while (simm >= 0.6 || (i < len && i < 10)) {
      if (simm != -1 && sim < 0.6) {
        break;
      }

      //Actually getting the info from the ranks and stuff

      if (i % 3 == 0) {
        res.append('div.row')
          .attr('class', 'row')
          .attr('id', 'row' + (i / 3));
      }

      d3.select('row' + (i / 3)).append('div')
        .attr('class', 'rank' + (i % 3))
        .attr('id', 'rank' + (i));


      //Passing on necessary content over to divs

      //Advance i and your position in the ranks
    }




  </script>


</body>

</html>