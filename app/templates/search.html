<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta charset="UTF-8">
    <title>Game Recommendations</title>
    <link rel="stylesheet" href="/static/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.8.10/themes/smoothness/jquery-ui.css" type="text/css">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
</head>
<body style="padding:0px">
    <div class="navbar navbar-default navbar-fixed-bottom" role="navigation">
        <div class="container">
            <p class="navbar-text">Built by: cj369, ec636, lfh32, ll692, mac568</p>
        </div>
    </div>
    <!-- Slideshow -->
    <div class="slideshow-container" style="padding:0%; position: static;">
        <!-- Full-width images with number and caption text -->
        <img
            class="mySlides"
            src="{{ url_for('static', filename='img/p1.jpeg') }}"
            alt="slideshow2"
            style="width: 100%; height: 100%; filter: brightness(50%);"
        >
        <img
            class="mySlides"
            src="{{ url_for('static', filename='img/p2.jpeg') }}"
            alt="slideshow3"
            style="width: 100%; height: 100%; filter: brightness(50%);"
        >
        <img
            class="mySlides"
            src="{{ url_for('static', filename='img/p3.jpeg') }}"
            alt="slideshow4"
            style="width: 100%; height: 100%; filter: brightness(50%);"
        >
        <img
            class="mySlides"
            src="{{ url_for('static', filename='img/p4.jpeg') }}"
            alt="slideshow5"
            style="width: 100%; height: 100%; filter: brightness(50%);"
        >
        <img
            class="mySlides"
            src="{{ url_for('static', filename='img/p6.jpeg') }}"
            alt="slideshow7"
            style="width: 100%; height: 100%; filter: brightness(50%);"
        >
        <img
            class="mySlides"
            src="{{ url_for('static', filename='img/p8.png') }}"
            alt="slideshow8"
            style="width: 100%; height: 100%; filter: brightness(50%);"
        >
        <img
            class="mySlides"
            src="{{ url_for('static', filename='img/p9.jpeg') }}"
            alt="slideshow9"
            style="width: 100%; height: 100%; filter: brightness(50%);"
        >
        <img
            class="mySlides"
            src="{{ url_for('static', filename='img/p10.png') }}"
            alt="slideshow10"
            style="width: 100%; height: 100%; filter: brightness(50%);"
        >
    </div>
    <form class="global-search" method="GET">
        <img class="title-image" src="{{ url_for('static', filename='img/title.png') }}" alt="title2">
        <div class="form-group autocomplete">
            <div style="display: flex;">
                <div>
                    <input
                        id="gn"
                        name="game"
                        class="form-control"
                        placeholder="Enter a game to start"
                        autocomplete="off"
                    >
                    <div id="input_game" class="autocomplete-items"></div>
                </div>
                <button
                    id="go"
                    type="submit"
                    class="btn btn-info"
                    style="margin-left: 15px;"
                >Go!</button>
            </div>
        </div>
    </form>
    {% if output_message != null and output_message != "" %}
    {% if gt == "Video Games" %}
    <div id="Video Games" style="border-color: #4285F4;border-width: 5px;">
        <div>
            <h2 style="padding-left: 20px; padding-top: 10px;">Genres</h2>
            <ul name="genres" id="genres">
                <button class="fil1tag tag" type="button" value="neutral">
                    Accounting
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Action
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Adventure
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Animation & Modeling
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Audio Production
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Casual
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Design & Illustration
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Documentary
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Early Access
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Education
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Free to Play
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Game Development
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Gore
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Indie
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Massively Multiplayer
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Nudity
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Photo Editing
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Racing
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    RPG
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Sexual Content
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Simulation
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Software Training
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Sports
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Strategy
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Tutorial
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Utilities
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Video Production
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Violent
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Web Publishing
                </button>
            </ul>
            <h2 style="padding-left: 20px; padding-top: 10px;">Platforms</h2>
            <ul name="platforms" id="platforms">
                <button class="fil2tag tag" type="button" value="neutral">
                    Windows
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Mac
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Unix
                </button>
            </ul>
            <h2 style="padding-left: 20px; padding-top: 10px;">Players</h2>
            <ul name="players" id="players">
                <button class="fil3tag tag" type="button" value="neutral">
                    Single Player
                </button>
                <button class="fil3tag tag" type="button" value="neutral">
                    Multi Player
                </button>
            </ul>
            <h2 style="padding-left: 20px; padding-top: 10px;">Playtime</h2>
            <ul name="playtime" id="playtime">
                <input class="fil4tag" placeholder="Min Minutes">
                <input class="fil4tag" placeholder="Max Minutes">
            </ul>
            <h2 style="padding-left: 20px; padding-top: 10px;">Price</h2>
            <ul name="price" id="price">
                <input class="fil5tag" placeholder="Min Price">
                <input class="fil5tag" placeholder="Max Price">
            </ul>
        </div>
        <br>
    </div>
    {% elif gt == "Board Games" %}
    <div id="Board Games" style="border-color: #4285F4;border-width: 5px;">
        <div>
            <h2 style="padding-left: 20px; padding-top: 10px;">Categories</h2>
            <ul name="categories" id="categories" style="padding-right: 20px;">
                <button class="fil1tag tag" type="button" value="neutral">
                    Abstract Strategy
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Action / Dexterity
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Adventure
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Age of Reason
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    American Civil War
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    American Indian Wars
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    American Revolutionary War
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    American West
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Ancient
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Animals
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Arabian
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Aviation / Flight
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Bluffing
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Book
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Card Game
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Childrens Game
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    City Building
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Civil War
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Civilization
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Collectible Components
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Comic Book / Strip
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Deduction
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Dice
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Economic
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Educational
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Electronic
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Environmental
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Expansion for Base-game
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Exploration
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Fantasy
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Farming
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Fighting
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Game System
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Horror
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Humor
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Industry / Manufacturing
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Korean War
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Mafia
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Math
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Mature / Adult
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Maze
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Medical
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Medieval
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Memory
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Miniatures
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Modern Warfare
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Movies / TV / Radio theme
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Murder/Mystery
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Music
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Mythology
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Napoleonic
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Nautical
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Negotiation
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Novel-based
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Number
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Party Game
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Pike and Shot
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Pirates
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Political
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Post-Napoleonic
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Prehistoric
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Print & Play
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Puzzle
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Racing
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Real-time
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Religious
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Renaissance
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Science Fiction
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Space Exploration
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Spies/Secret Agents
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Sports
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Territory Building
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Trains
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Transportation
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Travel
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Trivia
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Video Game Theme
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Vietnam War
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Wargame
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Word Game
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    World War I
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    World War II
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Zombies
                </button>
            </ul>
            <h2 style="padding-left: 20px; padding-top: 10px;">Mechanics</h2>
            <ul name="mechanics" id="mechanics">
                <button class="fil2tag tag" type="button" value="neutral">
                    Acting
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Action / Movement Programming
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Action Point Allowance System
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Area Control / Area Influence
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Area Enclosure
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Area Movement
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Area-Impulse
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Auction/Bidding
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Betting/Wagering
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Campaign / Battle Card Driven
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Card Drafting
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Chit-Pull System
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Commodity Speculation
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Cooperative Play
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Crayon Rail System
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Deck / Pool Building
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Dice Rolling
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Grid Movement
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Hand Management
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Hex-and-Counter
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Hidden Traitor
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Line Drawing
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Memory
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Modular Board
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Paper-and-Pencil
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Partnerships
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Pattern Building
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Pattern Recognition
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Pick-up and Deliver
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Player Elimination
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Point to Point Movement
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Press Your Luck
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Rock-Paper-Scissors
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Role Playing
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Roll / Spin and Move
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Rondel
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Route/Network Building
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Secret Unit Deployment
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Set Collection
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Simulation
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Simultaneous Action Selection
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Singing
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Stock Holding
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Storytelling
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Take That
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Tile Placement
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Time Track
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Trading
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Trick-taking
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Variable Phase Order
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Variable Player Powers
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Voting
                </button>
                <button class="fil2tag tag" type="button" value="neutral">
                    Worker Placement
                </button>
            </ul>
            <h2 style="padding-left: 20px; padding-top: 10px;">Playtime</h2>
            <ul name="playtime" id="playtime">
                <input class="fil3tag" placeholder="Min Minutes">
                <input class="fil3tag" placeholder="Max Minutes">
            </ul>
            <h2 style="padding-left: 20px; padding-top: 10px;">Players</h2>
            <ul name="players" id="players">
                <input class="fil4tag" placeholder="Min Players">
                <input class="fil4tag" placeholder="Max Players">
            </ul>
        </div>
    </div>
    {% elif gt == "Mobile Games" %}
    <div id="Mobile Games" style="border-color: #4285F4;border-width: 5px;">
        <div>
            <h2 style="padding-left: 20px; padding-top: 10px;">Genres</h2>
            <ul name="genres" id="genres">
                <button class="fil1tag tag" type="button" value="neutral">
                    Action
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Adventure
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Action & Adventure
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Arcade
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Board
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Brain Games
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Casual
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Card
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Casino
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Creativity
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Education
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Music
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Pretend Play
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Puzzle
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Racing
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Role Playing
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Simulation
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Sports
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Strategy
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Trivia
                </button>
                <button class="fil1tag tag" type="button" value="neutral">
                    Word
                </button>
            </ul>
            <h2 style="padding-left: 20px; padding-top: 10px;">Price</h2>
            <ul name="price" id="price">
                <input class="fil2tag" placeholder="Min Price">
                <input class="fil2tag" placeholder="Max Price">
            </ul>
            <h2 style="padding-left: 20px; padding-top: 10px;">Rating</h2>
            <ul name="rating" id="rating">
                <input class="fil3tag" placeholder="Min Rating">
            </ul>
        </div>
    </div>
    {% endif %}
    <button
        type="submit"
        class="filter"
        style="margin-left: 20px;"
        id="filter-btn"
        style="font-family: Arcade;"
    >Filter</button>
    <div id="output" style="padding-top: 20px;">
        <p style="text-align:center; font-size: 48px; font-family: Arcade;">
            {% if output_message == "invalid query" %}
            Invalid query. Try again.
            {% else %}
            Showing&nbsp;&nbsp;&nbsp;results&nbsp;&nbsp;&nbsp;for:&nbsp;&nbsp;
            <strong>
                {{ output_message }}
            </strong>
            {% endif %}
        </p>
    </div>
    <div class="container-fluid results" style="padding-bottom: 75px;">
        <form class="form-inline" style="text-align:center;">
            {% if data != None %}
            {% for d in data %}
            <div class="col-sm-4 overlay-container card" style="padding: 5px; position:relative; ">
                <div class="result-container" style="border: 1px solid lightgrey; border-radius: 10px">
                    <!-- Being Image of result -->
                    <div class="result-box " style="
                display: block;
                height: 240px;
                padding: 50px 0;
                background-size: cover;
                background-position: center;
                background-image: url(
                    {% if gt == 'Video Games' %}
                    {{ d[5] }}
                    {% elif gt == 'Board Games' %}
                    {{ d[2] }}
                    {% else %}
                    {{url_for('static', filename='img/gplay1.jpeg')}}
                    {% endif %}
                );
                border-top-left-radius: 10px;
                border-top-right-radius: 10px;"></div>
                    <!-- End Image of result  -->
                    <!-- Begin overlay  -->
                    <div class="overlay" style="height: 100%;">
                        <div class="result-box-caption">
                            <div class="result-box-caption-content">
                                <!-- Game Name -->
                                <!-- <div class="result-text">
                                <p>
                                    <strong>

                                    </strong>
                                </p>
                            </div> -->
                                <!-- More info button -->
                                <div class="result-expand" style="padding-top: 15px;">
                                    <button type="button" class="modal-btn btn btn-info" style="font-size: 20px; font-family: Optima; transition-duration: 0.4s;">
                                        {% if gt == 'Video Games' %}
                                    {{ d[1] }}
                                    {% else %}
                                    {{ d[0] }}
                                    {% endif %}
                                    </button>
                                </div>
                                <br>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End overlay  -->
            </div>
            <div class="modal-pop-up modal" id="m-{{loop.index0}}">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <span class="close" id="close-{{loop.index0}}" style="size=300%;">&times;</span>
                            <h5 class="modal-title" style="font-family: Optima;">
                                {% if gt == 'Video Games' %}
                                {{ d[1] }}
                                {% else %}
                                {{ d[0] }}
                                {% endif %}
                            </h5>
                            <!-- <span class="close" id="close-{{loop.index0}}">x</span> -->
                        </div>
                        <div class="modal-body">
                            <img
                                class="modal-img"
                                src="{% if gt == 'Video Games' %}
                                    {{ d[5] }}
                                    {% elif gt == 'Board Games' %}
                                    {{ d[2] }}
                                    {% else %}
                                    {{url_for('static', filename='img/gplay.jpg')}}
                                    {% endif %}"
                                alt="game image"
                                style="width:80%"
                            >
                            <p>
                                <a href="
                                    {% if gt == 'Video Games'%}
                                    {{ d[6] }}
                                    {% elif gt == 'Board Games' %}
                                    {{ d[3] }}
                                    {% endif %}
                                ">
                                    {% if gt == 'Mobile Games' %}
                                    {% else %}
                                    Click here for more info
                                    {% endif %}
                                </a>
                            </p>
                            <p>
                                Similarity Score: {% if gt == 'Video Games'%}
                                {{ d[0] }}
                                {% elif gt == 'Mobile Games' %}
                                {{ d[1] }}
                                {% elif gt == 'Board Games' %}
                                {{ d[1] }}
                                {% endif %}
                            </p>
                            <p>
                                {% if gt == 'Video Games'%}
                                Price: {{ d[4] }}
                                {% elif gt == 'Mobile Games' %}
                                Price: {{ d[4] }}

                                {% endif %}
                            </p>
                            <p>
                                Tags: {% if gt == 'Video Games'%}
                                {{ d[2] }}
                                {% elif gt == 'Mobile Games' %}
                                {{ d[2] }}
                                {% elif gt == 'Board Games' %}
                                {{ d[5] }}
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% endif %}
        </form>
    </div>
    {% endif %}
    <script>
        $(document).ready(function () {
            // call edit distance function
            async function edDist(gn){
                var res = await $.ajax({
                    url: "/",
                    type: "POST",
                    data: { 'game_name': gn }
                });
                return res;
            }

            // add options to dropdown
            let gn = d3.select('#gn');
            gn.on('input', function(){
                var x = document.getElementById('input_game');
                while (x.lastChild) {
                    x.removeChild(x.lastChild)
                }

                if (document.getElementById('gn').value == '' ||
                    document.getElementById('gn').value == null) { return; }

                edDist(document.getElementById('gn').value)
                    .then(val => {
                        let ans = val.split(';');
                        for (let i = 0; i < ans.length; i++) {
                            var op = document.createElement('div');
                            op.innerHTML = ans[i];
                            op.setAttribute("style",
                                "padding: 10px; cursor:pointer; background-color: #fff; border-bottom: 1px solid #d4d4d4; width: 100%; text-align: left;")
                            op.addEventListener("click", function(e) {
                                document.getElementById('gn').value = ans[i];
                                while (x.lastChild) {
                                    x.removeChild(x.lastChild)
                                }
                            });
                            x.appendChild(op);
                        }
                    });
            });

            document.getElementById('filter-btn').addEventListener("click", function() {
                let f1in = "";
                let f1out = "";
                let f2in = "";
                let f2out = "";
                let f3in = "";
                let f3out = "";
                let f4in = "";
                let f4out = "";
                let f5in = "";
                let f5out = "";

                if ('{{ gt }}' == "Board Games") {
                    let tags1 = document.getElementById('{{ gt }}').getElementsByClassName('fil1tag');
                    for (let i = 0; i < tags1.length; i++ ) {
                        if (tags1[i].value == 'include') {
                            f1in = f1in + tags1[i].textContent.trim() + ';'
                        } else if (tags1[i].value == 'exclude') {
                            f1out = f1out + tags1[i].textContent.trim() + ';'
                        }
                    }

                    let tags2 = document.getElementById('{{ gt }}').getElementsByClassName('fil2tag');
                    for (let i = 0; i < tags2.length; i++ ) {
                        if (tags2[i].value == 'include') {
                            f2in = f2in + tags2[i].textContent.trim() + ';'
                        } else if (tags2[i].value == 'exclude') {
                            f2out = f2out + tags2[i].textContent.trim() + ';'
                        }
                    }

                    let tags3 = document.getElementById('{{ gt }}').getElementsByClassName('fil3tag');
                    f3in = tags3[0].value;
                    f3out = tags3[1].value;

                    let tags4 = document.getElementById('{{ gt }}').getElementsByClassName('fil4tag');
                    f4in = tags4[0].value;
                    f4out = tags4[1].value;

                } else if ('{{ gt }}' == "Mobile Games") {
                    let tags1 = document.getElementById('{{ gt }}').getElementsByClassName('fil1tag');
                    for (let i = 0; i < tags1.length; i++ ) {
                        if (tags1[i].value == 'include') {
                            f1in = f1in + tags1[i].textContent.trim() + ';'
                        } else if (tags1[i].value == 'exclude') {
                            f1out = f1out + tags1[i].textContent.trim() + ';'
                        }
                    }

                    let tags2 = document.getElementById('{{ gt }}').getElementsByClassName('fil2tag');
                    f2in = tags2[0].value;
                    f2out = tags2[1].value;

                    let tags3 = document.getElementById('{{ gt }}').getElementsByClassName('fil3tag');
                    f3in = tags3[0].value;
                } else if ('{{ gt }}' == "Video Games") {
                    let tags1 = document.getElementById('{{ gt }}').getElementsByClassName('fil1tag');
                    for (let i = 0; i < tags1.length; i++ ) {
                        if (tags1[i].value == 'include') {
                            f1in = f1in + tags1[i].textContent.trim() + ';'
                        } else if (tags1[i].value == 'exclude') {
                            f1out = f1out + tags1[i].textContent.trim() + ';'
                        }
                    }

                    let tags2 = document.getElementById('{{ gt }}').getElementsByClassName('fil2tag');
                    for (let i = 0; i < tags2.length; i++ ) {
                        if (tags2[i].value == 'include') {
                            f2in = f2in + tags2[i].textContent.trim() + ';'
                        } else if (tags2[i].value == 'exclude') {
                            f2out = f2out + tags2[i].textContent.trim() + ';'
                        }
                    }

                    let tags3 = document.getElementById('{{ gt }}').getElementsByClassName('fil3tag');
                    for (let i = 0; i < tags3.length; i++ ) {
                        if (tags3[i].value == 'include') {
                            f3in = f3in + tags3[i].textContent.trim() + ';'
                        } else if (tags3[i].value == 'exclude') {
                            f3out = f3out + tags3[i].textContent.trim() + ';'
                        }
                    }

                    let tags4 = document.getElementById('{{ gt }}').getElementsByClassName('fil4tag');
                    f4in = tags4[0].value;
                    f4out = tags4[1].value;

                    let tags5 = document.getElementById('{{ gt }}').getElementsByClassName('fil5tag');
                    f5in = tags5[0].value;
                    f5out = tags5[1].value;
                }
                post('/', { 'gn': "{{ output_message }}",
                            'gt': "{{ gt }}",
                            'filter_1_in': f1in,
                            'filter_1_out': f1out,
                            'filter_2_in': f2in,
                            'filter_2_out': f2out,
                            'filter_3_in': f3in,
                            'filter_3_out': f3out,
                            'filter_4_in': f4in,
                            'filter_4_out': f4out,
                            'filter_5_in': f5in,
                            'filter_5_out': f5out });

            });
        });

        function post(path, params, method='post') {
            const form = document.createElement('form');
            form.method = method;
            form.action = path;

            for (const key in params) {
                if (params.hasOwnProperty(key)) {
                    const hiddenField = document.createElement('input');
                    hiddenField.type = 'hidden';
                    hiddenField.name = key;
                    hiddenField.value = params[key];

                    form.appendChild(hiddenField);
                }
            }

            document.body.appendChild(form);
            form.submit();
        }
    </script>
    <script>
        var filter_btns = document.getElementsByClassName('tag');
        for (let i = 0; i < filter_btns.length; i++) {
            filter_btns[i].onclick = function() {
                if (filter_btns[i].value == "neutral") {
                    filter_btns[i].value = "include"
                    filter_btns[i].style.backgroundColor = "lightblue"
                } else if (filter_btns[i].value == "include") {
                    filter_btns[i].value = "exclude"
                    filter_btns[i].style.backgroundColor = "lightcoral"
                } else {
                    filter_btns[i].value = "neutral"
                    filter_btns[i].style.backgroundColor = "lightgrey"
                }
            }
        }

        // modals
        var modals = document.getElementsByClassName("modal-pop-up");
        var btns = document.getElementsByClassName("modal-btn");
        var spans = document.getElementsByClassName("close");

        for (let i = 0; i < modals.length; i++) {
            btns[i].onclick = function() {
                modals[i].style.display = "block";
            }
            spans[i].onclick = function() {
                modals[i].style.display = "none";
            }
          }

        // background
        var slideIndex = 0;
        carousel();

        function carousel() {
            var i;
            var x = document.getElementsByClassName("mySlides");
            for (i = 0; i < x.length; i++) {
            x[i].style.display = "none";
            }
            slideIndex++;
            if (slideIndex > x.length) {slideIndex = 1}
            x[slideIndex-1].style.display = "block";
            setTimeout(carousel, 3000); // change image every 2 seconds
        }
    </script>
</html>
